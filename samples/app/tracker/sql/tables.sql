CREATE DATABASE IF NOT EXISTS `tracker` DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_unicode_ci;

USE `tracker`;

SET storage_engine=INNODB;

CREATE TABLE IF NOT EXISTS `field`(
    `id` BIGINT NOT NULL AUTO_INCREMENT,
    `module` VARCHAR(16) NOT NULL,
    `order` TINYINT UNSIGNED NOT NULL,
    `locale` VARCHAR(8) NOT NULL,
    `display` VARCHAR(32) NOT NULL,
    `name` VARCHAR(16) NOT NULL,
    `type` TINYINT UNSIGNED NOT NULL,
    `options` VARCHAR(16),
    `placeholder` VARCHAR(32),
    `pattern` VARCHAR(128),
    `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`),
    KEY (`module`, `locale`)
);

CREATE TABLE IF NOT EXISTS `fieldType`(
    `id` TINYINT UNSIGNED NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(16) NOT NULL,
    `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`)
);

CREATE TABLE IF NOT EXISTS `job`(
    `id` BIGINT NOT NULL AUTO_INCREMENT,
    `caller` VARCHAR(64) NOT NULL,
    `date` DATE NOT NULL,
    `time` TIME NOT NULL,
    `driver` SMALLINT NOT NULL,
    `vehicle` SMALLINT NOT NULL,
    `mobile` VARCHAR(16) NOT NULL,
    `pickup` VARCHAR(255) NOT NULL,
    `dropoff` VARCHAR(255) NOT NULL,
    `type` SMALLINT NOT NULL,
    `payment` SMALLINT NOT NULL,
    `charge` SMALLINT DEFAULT 0,
    `status` TINYINT DEFAULT 1,
    `updatedBy` BIGINT,
    `createdBy` BIGINT,
    `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`)
);

CREATE TABLE IF NOT EXISTS `driver`(
    `id` BIGINT NOT NULL AUTO_INCREMENT,
    `name` varchar(64)  NOT NULL,
    `mobile` VARCHAR(16),
    `status` TINYINT DEFAULT 1,
    `updatedBy` BIGINT,
    `createdBy` BIGINT,
    `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`)
);

CREATE TABLE IF NOT EXISTS `vehicle`(
    `id` BIGINT NOT NULL AUTO_INCREMENT,
    `tag` VARCHAR(16) NOT NULL,
    `seater` SMALLINT UNSIGNED DEFAULT 2,
    `model` VARCHAR(16),
    `status` TINYINT DEFAULT 1,
    `updatedBy` BIGINT,
    `createdBy` BIGINT,
    `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`)
);

CREATE TABLE IF NOT EXISTS `const`(
    `id` INT NOT NULL,
    `name` VARCHAR(16) NOT NULL,
    `cat` VARCHAR(16) NOT NULL,
    `status` TINYINT DEFAULT 1,
    `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
