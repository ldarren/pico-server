CREATE DATABASE IF NOT EXISTS `pico` DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_unicode_ci;

USE `pico`;

SET storage_engine=INNODB;

CREATE TABLE IF NOT EXISTS `store`(
    `id` VARCHAR(256) NOT NULL,
    `json` TEXT NOT NULL,
    `flags` INT(11) DEFAULT 0,
    `cas` BIGINT(20) UNSIGNED DEFAULT 0,
    `ttl` INT(11) DEFAULT 0,
    `status` TINYINT DEFAULT 1,
    `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`)
);

CREATE TABLE IF NOT EXISTS `rule`(
    `id` VARCHAR(256) NOT NULL,
    `json` TEXT NOT NULL,
    `status` TINYINT DEFAULT 1,
    `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`)
);
